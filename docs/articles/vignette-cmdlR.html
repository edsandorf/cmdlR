<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>vignette-cmdlR • cmdlR</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="vignette-cmdlR">
<meta property="og:description" content="cmdlR">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">cmdlR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.2.9007</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/vignette-cmdlR.html">vignette-cmdlR</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/edsandorf/cmdlR/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="vignette-cmdlR_files/accessible-code-block-0.0.1/empty-anchor.js"></script><link href="vignette-cmdlR_files/anchor-sections-1.0/anchor-sections.css" rel="stylesheet">
<script src="vignette-cmdlR_files/anchor-sections-1.0/anchor-sections.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>vignette-cmdlR</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/edsandorf/cmdlR/blob/master/vignettes/vignette-cmdlR.Rmd"><code>vignettes/vignette-cmdlR.Rmd</code></a></small>
      <div class="hidden name"><code>vignette-cmdlR.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level1">
<h1 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h1>
<p>Choice modeling has been around for decades …</p>
<div id="why-another-r-package" class="section level2">
<h2 class="hasAnchor">
<a href="#why-another-r-package" class="anchor"></a>Why another R package?</h2>
<p>I wrote this package to make my life easier. Over the years, these codes have existed in many different versions.</p>
<p>Every time I began a new project or paper, I would copy my old codes and change them to estimate the particular model I needed. I would often need to extract different information from the estimation routines.</p>
<p>Over time, this led to a proliferation of code with similar basic functionality, but different extensions stored in different locations on my computer. Keeping track of the most recent version or which code could do what quickly became very difficult.</p>
<p>As I have learned more about programming in R.</p>
<p>Writing all my code into a R package became a fun way to dive deeper into how R works. It allowed me to develop as a programmer and it has made my life easier since the most recent version of my code is all in one place and can be updated quickly within each project by simply installing the newest version of the package.</p>
<p>Re-writing the code as a package has allowed me to rethink how I solved problems in the past. People familiar with the R package “Apollo” written by Stephane Hess and David Palma, will recognize the modular approach taken in this package. I am truly impressed by the balance that they have struck between ease-of-use and accessibility, and giving the user the power to easily extend the code with their own log-likelihood functions. In this package, I try to emulate and expand on this design philosophy.</p>
</div>
<div id="the-name" class="section level2">
<h2 class="hasAnchor">
<a href="#the-name" class="anchor"></a>The name</h2>
<p><code>cmdlR</code> is short for Choice Modeler or Choice Modeling in R, whichever you prefer. To me, these five letters capture both what we are and what we do.</p>
</div>
<div id="installing-and-loading-the-package" class="section level2">
<h2 class="hasAnchor">
<a href="#installing-and-loading-the-package" class="anchor"></a>Installing and loading the package</h2>
<p>The package is not yet on CRAN (I don’t know if it will ever be), but it is available to install from my <a href="https://github.com/edsandorf/cmdlR">GitHub repository</a>. The easiest way to access the package is installing it directly using the <code>install_github()</code> function from the <code>devtools</code> package.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_github</a></span><span class="op">(</span><span class="st">"edsandorf/cmdlR"</span><span class="op">)</span></code></pre></div>
<p>Once you have installed the package, go ahead and load it using the <code><a href="https://rdrr.io/r/base/library.html">library()</a></code> function. You will see a welcome message and the cmdlR logo.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://cmdlr.edsandorf.me">cmdlR</a></span><span class="op">)</span>
<span class="co">#&gt; **************************************************************</span>
<span class="co">#&gt;                                              _ _ _ _ _ _ _</span>
<span class="co">#&gt;                                             /             \  </span>
<span class="co">#&gt;                                             |      _ _     \</span>
<span class="co">#&gt;       _ _ _ _ _ _ _ _ _ _ _ _ _ _ _   _ _   |     /   \     \ </span>
<span class="co">#&gt;     /        |             |       \ |   |  |     |   |     |</span>
<span class="co">#&gt;    /    _ _ _|             |   _    \|   |  |     \_ _/     / </span>
<span class="co">#&gt;   /    /   |    ^     ^    |  |  \   \   |  |              /</span>
<span class="co">#&gt;  |    |    |   | |   | |   |  |   |   |  |  |      _ _     \  </span>
<span class="co">#&gt;  |    |    |   | |   | |   |  |   |   |  |  |     /   \     \</span>
<span class="co">#&gt;  |    |    |   | |   | |   |  |   |   |  |  |    /     \     \</span>
<span class="co">#&gt;   \    \ _ |_  | |   | |   |  |_ /   /   |_ |_ _ |_    |     |</span>
<span class="co">#&gt;    \         | | |   | |   |        /|             |   |     |</span>
<span class="co">#&gt;     \ _ _ _ _|_| |_ _| |_ _|_ _ _ _/ |_ _ _ _ _ _ _|   |_ _ _|</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; ***************************************************************</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Thank you for using cmdlR! </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; You are currently using version: 0.0.2.9007</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; The latest version is: 0.0.2</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; To access the latest version, please run </span>
<span class="co">#&gt; devtools::install_github('edsandorf/cmdlR') </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; To cite this package: </span>
<span class="co">#&gt; utils::citation('cmdlR')</span></code></pre></div>
</div>
<div id="getting-help" class="section level2">
<h2 class="hasAnchor">
<a href="#getting-help" class="anchor"></a>Getting help</h2>
<p>The package does not have its own help forum nor does it have much documentation beyond this vignette (which also serves as a manual) and the examples provided in the folder /examples. However, on the package website (<a href="https://cmdlR.edsandorf.me">https://cmdlR.edsandorf.me</a>), I will publish small R and package related blog posts as well as links to my research papers using this package.</p>
</div>
<div id="reporting-a-bug" class="section level2">
<h2 class="hasAnchor">
<a href="#reporting-a-bug" class="anchor"></a>Reporting a bug</h2>
<p>All software contain bugs and this R package is no different. I do my best to root them out, but sometimes they can be persistent and difficult to spot. If you do come across one, please report it on the “Issues” page of this package’s GitHub repository. Label the issue as a “bug”. Please be detailed and if possible include a reproducible example.</p>
</div>
<div id="requesting-a-feature" class="section level2">
<h2 class="hasAnchor">
<a href="#requesting-a-feature" class="anchor"></a>Requesting a feature</h2>
<p>The normal development cycle of the package depends on the needs of my current projects. I will usually develop new functions and add them to the package as needed. However, if the package is missing an essential feature, please feel free to let me know. To help me track feature requests and allow others to comment on them as well, please use the “Issues” page on this package’s Github repository and label the issue as a “feature request”. The more detail you add with the request, the easier it will be for me to understand and implement.</p>
</div>
<div id="contributing-to-the-package" class="section level2">
<h2 class="hasAnchor">
<a href="#contributing-to-the-package" class="anchor"></a>Contributing to the package</h2>
<p>If you wish to contribute to the package either by fixing a bug or adding a feature, please follow these steps:</p>
<ol style="list-style-type: decimal">
<li>Go to Github and create an account if you don’t have one.</li>
<li>Fork the project and clone it locally on your computer. Make sure that the repository is synced remotely before you move on to the next step.</li>
<li>Create a new branch for each bug fix or new feature you want to add.</li>
<li>Do the work and write a descriptive commit message. If you have added a new feature, please contribute documentation and tests. Make sure that it does not alter or break other parts of the code.</li>
<li>Push the changes to your remote repository.</li>
<li>Create a new pull request for each bug fix or new feature added. Do not add multiple bug fixes or features in a single pull request.</li>
<li>Respond to any code review feedback.</li>
</ol>
<p>This list is based on a great post on <a href="https://akrabat.com/the-beginners-guide-to-contributing-to-a-github-project/">how to contribute</a> to a github project.</p>
<p>In order keep everything readable and maintainable, please adhere to the code style. For details, please see the <a href="http://r-pkgs.had.co.nz/r.html">R chapter</a> of ‘R packages’ by Hadley Wickham.</p>
</div>
<div id="acknowledgments" class="section level2">
<h2 class="hasAnchor">
<a href="#acknowledgments" class="anchor"></a>Acknowledgments</h2>
<p>This package is based on years of experience developing and estimating choice models. The package was developed under the Marie Sklodowska-Curie Action INSPiRE under the European Union’s Horizon 2020 Research and INnovation Program Grant Agreement No 793163. A lot of the inspiration for this has come from existing R packages such as <a href="https://CRAN.R-project.org/package=gmnl">gmnl</a> and <a href="https://CRAN.R-project.org/package=mlogit">mlogit</a>. I have also benefited from the extensive choice modeling software <a href="http://www.apollochoicemodelling.com/">Apollo</a> and the excellent <a href="https://github.com/czaj/DCE">Matlab codes</a> written by Mikolaj Czajkowski. I have benefited greatly from discussions with Danny Campbell, Mikolaj Czajkowski, Stephane Hess and David Palma. The package comes with absolutely no warranty and limited support.</p>
</div>
</div>
<div id="running-your-first-model" class="section level1">
<h1 class="hasAnchor">
<a href="#running-your-first-model" class="anchor"></a>Running your first model</h1>
<p>Using the package consists of 7 steps packaged in convenient wrapper functions that ensures a logical approach to estimating a choice model.</p>
<div id="options" class="section level2">
<h2 class="hasAnchor">
<a href="#options" class="anchor"></a>Options</h2>
<div id="estimation-options---estim_opt" class="section level3">
<h3 class="hasAnchor">
<a href="#estimation-options---estim_opt" class="anchor"></a>Estimation options - <code>estim_opt</code>
</h3>
<p>The <code>cmdlR</code> package gives the user the ability to access the options and settings of the optimizers. This includes specifying the optimizer, optimization routine, precision levels and convergence criteria.</p>
<p>Note that different optimizers may use different optimization routines. If the user specifies an optimization routine that cannot be used by the specified optimizer, the optimizer option takes precedense and the optimization routine reverts to the default. For both <code>nloptr</code> and <code>maxLik</code> this is the <code>bfgs</code> routine. In this case a warning is printed to the console to make the user aware of this change.</p>
</div>
<div id="model-options---model_opt" class="section level3">
<h3 class="hasAnchor">
<a href="#model-options---model_opt" class="anchor"></a>Model options - <code>model_opt</code>
</h3>
</div>
<div id="summary-options---summary_opt" class="section level3">
<h3 class="hasAnchor">
<a href="#summary-options---summary_opt" class="anchor"></a>Summary options - <code>summary_opt</code>
</h3>
</div>
<div id="save-options---save_opt" class="section level3">
<h3 class="hasAnchor">
<a href="#save-options---save_opt" class="anchor"></a>Save options - <code>save_opt</code>
</h3>
</div>
</div>
<div id="the-log-likelihood-function---log_lik" class="section level2">
<h2 class="hasAnchor">
<a href="#the-log-likelihood-function---log_lik" class="anchor"></a>The log-likelihood function - <code>log_lik()</code>
</h2>
<p>The log-likelihood function must return the log-likelihood value. It is up to the user to specify whether this value should be positive or negative depending on whether the optimizer is minimizing or maximizing the function. It is possible to pass data from within the function to the model object by specifying the data to be passed along as an attribute to the vector of log-likelihood values. These can then be accessed through the model object after estimation. This functionality facilitates easy calculation of conditional estimates without having to re-run the model. However, passing information along as an attribute does come with a (small) computational overhead.</p>
</div>
<div id="steps-to-estimate-the-model" class="section level2">
<h2 class="hasAnchor">
<a href="#steps-to-estimate-the-model" class="anchor"></a>Steps to estimate the model</h2>
<div id="step-1-tidy-the-environment" class="section level3">
<h3 class="hasAnchor">
<a href="#step-1-tidy-the-environment" class="anchor"></a>Step 1: <code>tidy()</code> the environment</h3>
</div>
<div id="step-2-validate-the-inputs" class="section level3">
<h3 class="hasAnchor">
<a href="#step-2-validate-the-inputs" class="anchor"></a>Step 2: <code>validate()</code> the inputs</h3>
</div>
<div id="step-3-prepare-the-inputs" class="section level3">
<h3 class="hasAnchor">
<a href="#step-3-prepare-the-inputs" class="anchor"></a>Step 3: <code>prepare()</code> the inputs</h3>
</div>
<div id="step-4-estimate-the-model" class="section level3">
<h3 class="hasAnchor">
<a href="#step-4-estimate-the-model" class="anchor"></a>Step 4: <code>estimate()</code> the model</h3>
</div>
<div id="step-5-summarize-the-results" class="section level3">
<h3 class="hasAnchor">
<a href="#step-5-summarize-the-results" class="anchor"></a>Step 5: <code>summarize()</code> the results</h3>
</div>
<div id="step-6-store-the-results" class="section level3">
<h3 class="hasAnchor">
<a href="#step-6-store-the-results" class="anchor"></a>Step 6: <code>store()</code> the results</h3>
</div>
<div id="step-7-predict-using-the-results-of-the-model" class="section level3">
<h3 class="hasAnchor">
<a href="#step-7-predict-using-the-results-of-the-model" class="anchor"></a>Step 7: <code>predict()</code> using the results of the model</h3>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="https://edsandorf.me">Erlend Dancke Sandorf</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
